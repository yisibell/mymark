!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MyMark={})}(this,(function(e){"use strict";function t(e,t,i,n,o){var r=t.getContext("2d");if(r)for(var a=t.width,d=0,l=0,s=0;s<e.length;s++)(d+=r.measureText(e[s]).width)>a-i&&(r.fillText(e.substring(l,s),i,n),n+=o,d=0,l=s),s===e.length-1&&r.fillText(e.substring(l,s+1),i,n)}var i=function(e){var n=e.container,o=void 0===n?"body":n,r=e.width,a=void 0===r?"400px":r,d=e.height,l=void 0===d?"300px":d,s=e.content,c=void 0===s?"mymark":s,f=e.textAlign,u=void 0===f?"center":f,v=e.textBaseline,p=void 0===v?"middle":v,b=e.font,g=void 0===b?"18px Microsoft Yahei":b,h=e.fillStyle,y=void 0===h?"rgba(184, 184, 184, 0.3)":h,x=e.lineHeight,m=void 0===x?25:x,w=e.rotate,A=void 0===w?20:w,S=e.zIndex,_=void 0===S?1024:S,M=e.observe,O=void 0===M||M,T=e.open;if(void 0===T||T){var k="string"==typeof o?document.querySelector(o):o;if(k){var L=document.createElement("canvas");L.setAttribute("width",a),L.setAttribute("height",l);var j=L.getContext("2d");if(j){j.textAlign=u,j.textBaseline=p,j.font=g,j.fillStyle=y,j.rotate(Math.PI/180*A);var q,B,C=parseFloat(a)/2,E=parseFloat(l)/2;"Array"===(q=c,(B=Object.prototype.toString.call(q)).slice(B.indexOf(" ")+1,B.length-1))?c.forEach((function(e,i){t(e,L,C,E+m*i,m)})):t(c,L,C,E,m);var z=L.toDataURL(),F=document.querySelector(".__wm"),I=F||document.createElement("div"),J="\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%; \n    z-index: ".concat(_,";\n    pointer-events: none;\n    background-repeat: repeat;\n    background-image: url('").concat(z,"')");I.setAttribute("style",J),I.classList.add("__wm"),F||(k.style.position="relative",k.insertBefore(I,k.firstChild));var N=window.MutationObserver||window.WebKitMutationObserver;if(O&&N){var P=new N((function(){var t=document.querySelector(".__wm");(t&&t.getAttribute("style")!==J||!t)&&(P.disconnect(),i(JSON.parse(JSON.stringify(e))))}));P.observe(k,{attributes:!0,subtree:!0,childList:!0})}}}}};e.fillTextAutoLine=t,e.watermark=i,Object.defineProperty(e,"__esModule",{value:!0})}));
